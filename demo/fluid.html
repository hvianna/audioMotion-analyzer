<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>audioMotion-analyzer fluid layout demo</title>
	<link href="https://fonts.googleapis.com/css?family=Orbitron:900" rel="stylesheet">
	<link href="styles.css" rel="stylesheet">
</head>

<body>
	<header>
		<h1><a href="https://audiomotion.dev" class="logo">audioMotion-analyzer</a> | fluid layout demo</h1>
		<ul class="header-nav">
			<li><a href="index.html">Demos</a></li>
            <li><a href="https://audiomotion.dev">Home</a></li>
			<li><a href="https://github.com/hvianna/audioMotion-analyzer/blob/master/demo/fluid.js">View on GitHub</a></li>
		</ul>
	</header>

	<div class="sticky">
		<div id="container" class="fluid"></div>
	</div>
	<audio id="audio" controls crossorigin="anonymous"></audio>

	<div class="topbar flex">
		<div>
			Load audio file:
			<input type="file" id="uploadFile" accept="audio/*">
		</div>
		<div class="flex stretch">
			<button id="btn_mic" title="Microphone ON/OFF">üéôÔ∏è</button>
			<button id="btn_mute" title="Disconnect analyzer output from the speakers&#13;&#10;(prevent feedback loop when microphone is on)">disconnectOutput()</button>
			<button data-prop="isDestroyed" data-func="destroy">destroy()</button>
			<button id="btn_getBars" title="check browser console for data">getBars()</button>
			<button id="btn_getOptions" title="copies current settings to clipboard">getOptions()</button>
			<button id="btn_getThemeData" title="check browser console for data">getThemeData()</button>
			<button data-prop="isOn" data-func="toggleAnalyzer">toggleAnalyzer()</button>
			<button data-prop="isFullscreen" data-func="toggleFullscreen">toggleFullscreen()</button>
		</div>
	</div>

	<div class="analyzer-configuration">
		<div class="box center">
			<label class="label">Load a configuration preset
				<select id="presets"></select>
			</label>

			<label class="label">Background
				<select id="bgColor"></select>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=mode" target="_blank">mode</a>
				<select data-setting="mode">
					<option>bars</option>
					<option>graph</option>
				</select>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=bandresolution" target="_blank">bandResolution</a>
				<input type="range" min="0" max="8" data-setting="bandResolution" class="wide-range">
				<div class="value"></div>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=colormode" target="_blank">colorMode</a>
				<select data-setting="colorMode">
					<option>gradient</option>
					<option>bar-index</option>
					<option>bar-level</option>
				</select>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=settheme" target="_blank">setTheme (channel 0)</a>
				<div class="grid grid-2-cols">
					<select data-func="setTheme(this,0)" data-setting="getTheme(0)" class="colspan-2"></select>
					<button class="small-button" data-func="toggleThemeModifier(horizontal,0)" data-prop="getThemeModifiers(horizontal,0)">horizontal</button>
					<button class="small-button" data-func="toggleThemeModifier(reverse,0)" data-prop="getThemeModifiers(reverse,0)">reverse</button>
				</div>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=settheme" target="_blank">setTheme (channel 1)</a>
				<div class="grid grid-2-cols">
					<select data-func="setTheme(this,1)" data-setting="getTheme(1)" class="colspan-2"></select>
					<button class="small-button" data-func="toggleThemeModifier(horizontal,1)" data-prop="getThemeModifiers(horizontal,1)">horizontal</button>
					<button class="small-button" data-func="toggleThemeModifier(reverse,1)" data-prop="getThemeModifiers(reverse,1)">reverse</button>
				</div>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=channellayout" target="_blank">channelLayout</a>
				<select data-setting="channelLayout">
					<option>single</option>
					<option>dual-combined</option>
					<option>dual-horizontal</option>
					<option>dual-vertical</option>
				</select>
			</label>

			<label class="label"><a href="https://audiomotion.dev/#/?id=volume" target="_blank">volume</a>
				<input type="range" min="0" max="1" step=".1" data-setting="volume">
				<div class="value"></div>
			</label>
		</div>

		<div class="box center flex">
			<fieldset>
				<legend>FFT</legend>

				<label class="label"><a href="https://audiomotion.dev/#/?id=fftsize" target="_blank">fftSize</a>
					<select data-setting="fftSize">
						<option>1024</option>
						<option>2048</option>
						<option>4096</option>
						<option>8192</option>
						<option>16384</option>
						<option>32768</option>
					</select>
				</label>
				<label class="label"><a href="https://audiomotion.dev/#/?id=smoothing" target="_blank">smoothing</a>
					<input type="range" min="0" max=".9" step=".1" data-setting="smoothing">
					<div class="value"></div>
				</label>
			</fieldset>

			<fieldset>
				<legend>Frequency range & scaling</legend>

				<label class="label"><a href="https://audiomotion.dev/#/?id=minfreq" target="_blank">minFreq</a>
					<select data-setting="minFreq">
						<option>10</option>
						<option>16</option>
						<option>20</option>
						<option>25</option>
						<option>30</option>
						<option>40</option>
						<option>60</option>
						<option>100</option>
						<option>500</option>
						<option>1000</option>
					</select>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=maxfreq" target="_blank">maxFreq</a>
					<select data-setting="maxFreq">
						<option>8000</option>
						<option>10000</option>
						<option>12000</option>
						<option>16000</option>
						<option>20000</option>
						<option>22000</option>
						<option>24000</option>
					</select>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=frequencyscale" target="_blank">frequencyScale</a>
					<select data-setting="frequencyScale">
						<option>bark</option>
						<option>linear</option>
						<option>log</option>
						<option>mel</option>
					</select>
				</label>
			</fieldset>

			<fieldset>
				<legend>Sensitivity</legend>

				<label class="label"><a href="https://audiomotion.dev/#/?id=weightingfilter" target="_blank">weightingFilter</a>
					<select data-setting="weightingFilter">
						<option value="">none</option>
						<option>A</option>
						<option>B</option>
						<option>C</option>
						<option>D</option>
						<option>468</option>
					</select>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=mindecibels" target="_blank">minDecibels</a>
					<input type="range" min="-120" max="-60" step="5" data-setting="minDecibels">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=maxdecibels" target="_blank">maxDecibels</a>
					<input type="range" min="-40" max="0" step="5" data-setting="maxDecibels">
					<div class="value"></div>
				</label>
			</fieldset>

			<fieldset>
				<legend>Linear amplitude</legend>

				<button data-prop="linearAmplitude">linearAmplitude</button>
				<label class="label"><a href="https://audiomotion.dev/#/?id=linearboost" target="_blank">linearBoost</a>
					<input type="range" min="1" max="4" step=".2" data-setting="linearBoost">
					<div class="value"></div>
				</label>
			</fieldset>

			<fieldset>
				<legend>Frame rate</legend>
				<button data-prop="showFPS">showFPS</button>
				<label class="label"><a href="https://audiomotion.dev/#/?id=maxfps" target="_blank">maxFPS</a>
					<select data-setting="maxFPS">
						<option>0</option>
						<option>10</option>
						<option>20</option>
						<option>30</option>
						<option>60</option>
						<option>120</option>
					</select>
				</label>
			</fieldset>
		</div>

		<div class="box center flex">
			<fieldset>
				<legend>bandRes > 0 only</legend>
				<label class="label"><a href="https://audiomotion.dev/#/?id=barspace" target="_blank">barSpace</a>
					<input type="range" min="0" max="1" step=".05" data-setting="barSpace" class="wide-range">
					<div class="value"></div>
				</label>
			</fieldset>

			<fieldset>
				<legend>graph mode / outlineBars</legend>
				<label class="label"><a href="https://audiomotion.dev/#/?id=linewidth" target="_blank">lineWidth</a>
					<input type="range" min="0" max="4" step=".5" data-setting="lineWidth">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=fillalpha" target="_blank">fillAlpha</a>
					<input type="range" min="0" max="1" step=".1" data-setting="fillAlpha">
					<div class="value"></div>
				</label>
			</fieldset>

			<fieldset>
				<legend>Radial spectrum</legend>
				<label class="label"><a href="https://audiomotion.dev/#/?id=radial" target="_blank">radial</a>
					<input type="range" min="-1" max="1" step="1" data-setting="radial">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=radius" target="_blank">radius</a>
					<input type="range" min="0" max="1" step=".05" data-setting="radius">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=spinspeed" target="_blank">spinSpeed</a>
					<input type="range" min="-5" max="5" step="1" data-setting="spinSpeed">
					<div class="value"></div>
				</label>
			</fieldset>

			<fieldset>
				<legend>Reflex & Mirror</legend>
				<label class="label"><a href="https://audiomotion.dev/#/?id=reflexratio" target="_blank">reflexRatio</a>
					<input type="range" min="0" max=".9" step=".05" data-setting="reflexRatio">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=reflexalpha" target="_blank">reflexAlpha</a>
					<input type="range" min="0" max="1" step=".05" data-setting="reflexAlpha">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=reflexbright" target="_blank">reflexBright</a>
					<input type="range" min="0" max="2" step=".1" data-setting="reflexBright">
					<div class="value"></div>
				</label>

				<button data-prop="reflexFit">reflexFit</button>

				<label class="label"><a href="https://audiomotion.dev/#/?id=mirror" target="_blank">mirror</a>
					<input type="range" min="-1" max="1" step="1" data-setting="mirror">
					<div class="value"></div>
				</label>
			</fieldset>
		</div>

		<div class="box center flex">
			<fieldset>
				<legend>Bar modifiers</legend>
				<label class="label"><a href="https://audiomotion.dev/#/?id=alphabars" target="_blank">alphaBars</a>
					<select data-setting="alphaBars">
						<option>off</option>
						<option>on</option>
						<option>full</option>
					</select>
				</label>
				<label class="label"><a href="https://audiomotion.dev/#/?id=ledbars" target="_blank">ledBars</a>
					<select data-setting="ledBars">
						<option>off</option>
						<option>modern</option>
						<option>vintage</option>
					</select>
				</label>
			</fieldset>

			<fieldset>
				<legend>Custom LED parameters</legend>
				<label class="label">Enable
					<input id="customLeds" type="checkbox" data-custom="ledProps">
				</label>
				<label class="label"><a href="https://audiomotion.dev/#/?id=setledprops" target="_blank">ledHeight</a>
					<input id="ledHeight" type="number" min="0" max="50" value="16" data-custom="ledProps">
				</label>
				<label class="label"><a href="https://audiomotion.dev/#/?id=setledprops" target="_blank">ledGap</a>
					<input id="gapHeight" type="number" min="0.05" max="50" value="3" step=".05" data-custom="ledProps">
				</label>
			</fieldset>

			<fieldset>
				<legend>Peak behavior</legend>
				<label class="label"><a href="https://audiomotion.dev/#/?id=peaks" target="_blank">peaks</a>
					<select data-setting="peaks">
						<option>off</option>
						<option>drop</option>
						<option>fade</option>
					</select>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=peakline" target="_blank">peakLine</a>
					<input type="range" min="0" max="5" step=".5" data-setting="peakLine">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=peakdecaytime" target="_blank">peakDecayTime</a>
					<input type="range" min="0" max="5000" step="50" data-setting="peakDecayTime" class="wide-range">
					<div class="value"></div>
				</label>

				<label class="label"><a href="https://audiomotion.dev/#/?id=peakhold" target="_blank">peakHoldTime</a>
					<input type="range" min="0" max="5000" step="50" data-setting="peakHoldTime" class="wide-range">
					<div class="value"></div>
				</label>
			</fieldset>
		</div>

		<div class="box center flex stretch">
			<fieldset>
				<legend>Switches & read-only flags</legend>
				<div class="button-grid">
					<button data-prop="ansiBands">ansiBands</button>
					<button data-prop="loRes">loRes</button>
					<button data-prop="noteLabels">noteLabels</button>
					<button data-prop="outlineBars">outlineBars</button>
					<button data-prop="roundBars">roundBars</button>
					<button data-prop="showLedMask">showLedMask</button>
					<button data-prop="showScaleX">showScaleX</button>
					<button data-prop="showScaleY">showScaleY</button>
					<button data-prop="spreadGradient">spreadGradient</button>
				</div>
				<hr>
				<span class="flag" data-flag="isAlphaBars">isAlphaBars</span>
				<span class="flag" data-flag="isBandsMode">isBandsMode</span>
				<span class="flag" data-flag="isDestroyed">isDestroyed</span>
				<span class="flag" data-flag="isLedBars">isLedBars</span>
				<span class="flag" data-flag="isOctaveBands">isOctaveBands</span>
				<span class="flag" data-flag="isOutlineBars">isOutlineBars</span>
				<span class="flag" data-flag="isRoundBars">isRoundBars</span>
				<span class="flag" data-flag="isOn">isOn</span>
			</fieldset>

			<fieldset>
				<legend>Demo features added via callback</legend>
				<button data-feature="showLogo" class="full-width">Pulsating Logo</button><br>
				<button data-feature="energyMeter" class="full-width">Energy meters</button><br>
				<button data-feature="songProgress" class="full-width">Song progress bar</button>
			</fieldset>
		</div>

		<div class="box center">
			<fieldset>
				<legend>Test tones</legend>
				<label class="label">Waveform
					<select id="wave">
						<option>sawtooth</option>
						<option selected>sine</option>
						<option>square</option>
						<option>triangle</option>
					</select>
				</label>

				<label class="label">Note
					<select id="note">
						<option value="">Use custom</option>
						<option value="16.35">C0 - 16.35 Hz</option>
						<option value="32.70">C1 - 32.70 Hz</option>
						<option value="65.41">C2 - 65.41 Hz</option>
						<option value="130.81">C3 - 130.81 Hz</option>
						<option value="261.63">C4 - 261.63 Hz</option>
						<option value="440" selected>A4 - 440 Hz</option>
						<option value="523.25">C5 - 523.25 Hz</option>
						<option value="1046.5">C6 - 1046.5 Hz</option>
						<option value="2093">C7 - 2093 Hz</option>
						<option value="4186.01">C8 - 4186.01 Hz</option>
						<option value="8372.02">C9 - 8372.02 Hz</option>
						<option value="16744.04">C10 - 16744.04 Hz</option>
					</select>
				</label>

				<label class="label">Custom frequency (Hz)
					<input id="frequency" type="text">
				</label>

				<label class="label">L - Pan - R
					<input id="pan" type="range" min="-1" max="1" step=".2">
					<div class="value"></div>
				</label>

				<label class="label">Volume
					<input id="volume" type="range" min="0" max="1" step=".01">
					<div class="value"></div>
				</label>

				<button id="btn_play">Play</button>
				<button id="btn_soundoff">STOP</button>

				<div id="piano"></div>
			</fieldset>
	</div>

		</div>

	</div>

	<div class="credits">
		<strong>audioMotion-analyzer v<span id="version"></span></strong> Copyright &copy; 2018-2026 Henrique Avila Vianna. Source code available on <a href="https://github.com/hvianna/audioMotion-analyzer">GitHub</a>.
	</div>

	<script src="functions.js"></script>
	<script src="fluid.js" type="module"></script>

	<script>
		if ( location.href.startsWith('file://') )
			alert("This demo won't work when loaded via file:// protocol.\nSee the README file inside the demo folder for more information.");
	</script>

</body>
</html>
